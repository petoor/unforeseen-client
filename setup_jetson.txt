# Image 2GB version: https://developer.nvidia.com/jetson-nano-2gb-sd-card-image
# Image 4GB version: https://developer.nvidia.com/jetson-nano-sd-card-image
# To setup with USB see : https://www.youtube.com/watch?v=53rRMr1IpWs

After booting to a USB harddisk (DO NOT USE SD CARD OR USB FLASH).

# ssh to the jetson.
sudo apt-get update -y && sudo apt-get upgrade -y
# Pytorch uses python3.6
sudo apt install -y apt-utils python3.6 python3-pip v4l-utils
sudo ln -sf /usr/bin/python3 /usr/bin/python && sudo ln -sf /usr/bin/pip3 /usr/bin/pip

# Install jetson inference + pytorch

sudo apt-get install git cmake libpython3-dev python3-numpy
git clone --recursive https://github.com/dusty-nv/jetson-inference
cd jetson-inference
mkdir build
cd build
cmake ../
make -j$(nproc)
sudo make install
sudo ldconfig

# Install gstreamer and dependecies
sudo apt-get install gstreamer1.0-tools gstreamer1.0-alsa gstreamer1.0-plugins-base gstreamer1.0-plugins-good gstreamer1.0-plugins-bad gstreamer1.0-plugins-ugly gstreamer1.0-libav libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libgstreamer-plugins-good1.0-dev libgstreamer-plugins-bad1.0-dev libgirepository1.0-dev gcc libcairo2-dev pkg-config python3-dev gir1.2-gtk-3.0 -y

# Install pip packages
pip install -r requirements.txt

# stats
sudo -H pip install -U jetson-stats

# RTSP Server
Check version with gst-launch-1.0 --version
and download corrosponding server version from.
https://gstreamer.freedesktop.org/src/gst-rtsp-server/

untar and cd to folder
./configure
make

# and reboot
# To run without gui (Production)
sudo systemctl set-default multi-user.target 
# To add gui back  (Development)
sudo systemctl set-default graphical.target

and reboot after setting GUI options
